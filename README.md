# Lambda Typescript Starter

A starter for using AWS Lambda to execute calls to the QueryBoost API

## Quickstart

### Install

```sh
  git clone https://github.com/QueryBoost-Examples/typescript-lambda-starter.git
```

then

```sh
yarn install
```

or

```sh
npm install
```

### Setup

Create a .env file in the root directory and add your QueryBoost Mock API Key:

`MOCK_API_KEY=YOUR_QUERYBOOST_MOCK_KEY`

then run

```sh
yarn codegen
```

or

```
npm codegen
```

to generate up to date Typescript types of the QueryBoost schema

## Features

- graphql-request to execute the GraphQL queries
- [Graphql code generator](https://graphql-code-generator.com/) to generate typescript types for the QueryBoost schema and your Queries or Mutations. Running `yarn codegen` will generate types for the QueryBoost api as well as for any queries or mutations in the `src/graphql` folder
- [Serverless Framework](https://www.serverless.com/) for deployment

## Structure

- `src/index.ts` - The entry point containing the AWS Lambda handler. The example code is for a CloudWatch Event trigger for the lambda
- `src/graphql` - Directory for any GraphQL queries or mutations
- `src/types/types.ts` - Contains the Typescript types generated by GraphQL code generator for the QueryBoost Schema and for any queries or mutations in /graphql
- `codegen.yml` - Config file for generating the Typescript types from the QueryBoost schema. See [GraphQL code generator](https://graphql-code-generator.com/docs/getting-started/codegen-config) for configuration options
- `serverless.yml` - Config file for Serverless deployment

## Build

- Run `yarn build` or `npm build`
- The Typescript in `/src` will be compiled to `/dist`

## Deployment with Serverless Framework

First, make sure you have the [Serverless Framework](https://www.serverless.com/framework/docs/providers/aws/guide/installation/) installed and setup for your AWS Account

Then in the project directory run:

```sh
serverless deploy
```

This will build and deploy your code to AWS Lambda. The default Serverless config is to trigger the Lambda once per day at 12:00pm UTC. See [Serverless Docs](https://www.serverless.com/framework/docs/providers/aws/events/schedule/) for information on scheduling the trigger event.
